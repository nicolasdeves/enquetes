generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Enquete {
  id           String   @id @default(uuid())
  titulo       String
  criadoEm     DateTime @default(now())
  atualizadoEm DateTime @default(now())

  opcao Opcao[]
  voto  Voto[]
}

model Opcao {
  id        String @id @default(uuid())
  descricao String
  enqueteId String

  enquete Enquete @relation(fields: [enqueteId], references: [id])
  voto    Voto[]
}

model Voto {
  id        Int      @id @default(autoincrement())
  sessaoId  String
  criadoEm  DateTime @default(now())
  opcaoId   String
  enqueteId String

  opcao   Opcao   @relation(fields: [opcaoId], references: [id])
  enquete Enquete @relation(fields: [enqueteId], references: [id])

  @@unique([sessaoId, enqueteId])
}
